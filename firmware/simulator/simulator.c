#include <locale.h>
#include <ncursesw/ncurses.h>
#include <wchar.h>
#include "cygnicator_headlights.h"
#include <curses.h> 

#define WIDTH 500
#define HEIGHT 500


#include <unistd.h>

void *start_simulator(void *arg) {

  bool *gpio_map = (bool *)arg;
  wchar_t car[2048 * 2];
  WINDOW *menu_win;
  int c = 0;
  initscr();
  cbreak();
  menu_win =  newwin(WIDTH, HEIGHT, 0, 0);
  box(menu_win, WIDTH, HEIGHT);
  wrefresh(menu_win);
  keypad(menu_win, TRUE);
  for (;;) {

    usleep(1000);
      // Useful emojis: ðŸŒŸ ðŸš˜
  // Positions [RL0, FL0, RL1, FL1, RL2 ...]
  //wchar_t gpio_0[] = gpio_map[0] ? L"[]" : L"oiajsoidjasd";
  c = wgetch(menu_win);
  switch (c) {
    case KEY_LEFT:
      fprintf(stdout, "\a\n" );
    break;
    case KEY_RIGHT:
     fprintf(stdout, "\a\n" );
    break;
    case 'h':
     fprintf(stdout, "\a\n" );
    case 'b':
     fprintf(stdout, "\a\n" );
    break;
    default:
  };
  swprintf(car, 2048 * 2,
           L" \\
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                 \n\
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   \n\
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ â–ˆâ–ˆ        â–ˆâ–ˆ             â–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  \n\
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆ              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆ  â–ˆ                            â–ˆ  â–ˆâ–ˆâ–ˆ \n\
â–ˆâ–ˆâ–ˆ          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ          â–ˆâ–ˆ â–ˆâ–ˆ                           â–ˆ  â–ˆâ–ˆâ–ˆ \n\
â–ˆâ–ˆâ–ˆ                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                â–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                    â–ˆ  â–ˆâ–ˆâ–ˆ \n\
â–ˆ%ls                        â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ %ls â–ˆâ–ˆâ–ˆ \n\
â–ˆ%ls                        â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                       %ls  â–ˆâ–ˆ \n\
â–ˆ%ls                        â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                       %ls  â–ˆâ–ˆ \n\
â–ˆ%ls                        â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                       %ls  â–ˆâ–ˆ \n\
â–ˆâ–ˆ                         â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                        â–ˆ  â–ˆâ–ˆ \n\
â–ˆâ–ˆ                         â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                        â–ˆ  â–ˆâ–ˆ \n\
â–ˆâ–ˆ                         â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                        â–ˆ  â–ˆâ–ˆ \n\
â–ˆâ–ˆ                         â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                        â–ˆ  â–ˆâ–ˆ \n\
â–ˆâ–ˆ                         â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                        â–ˆ  â–ˆâ–ˆ \n\
â–ˆâ–ˆ                         â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                        â–ˆ  â–ˆâ–ˆ \n\
â–ˆâ–ˆ                         â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                        â–ˆ  â–ˆâ–ˆ \n\
â–ˆ%ls                        â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                       %ls  â–ˆâ–ˆ \n\
â–ˆ%ls                        â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                 â–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                       %ls â–ˆâ–ˆâ–ˆ \n\
â–ˆ%ls                        â–ˆâ–ˆâ–ˆ                   â–ˆâ–ˆ â–ˆ                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ %ls â–ˆâ–ˆâ–ˆ \n\
â–ˆ%ls                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆ                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                   %ls â–ˆâ–ˆâ–ˆ \n\
â–ˆâ–ˆâ–ˆ           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ          â–ˆâ–ˆ â–ˆâ–ˆ                           â–ˆ  â–ˆâ–ˆâ–ˆ \n\
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆ              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆ  â–ˆ                            â–ˆ â–ˆâ–ˆâ–ˆ  \n\
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ        â–ˆâ–ˆ             â–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  \n\
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   \n\
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                 \n\
  ",
  gpio_map[gpio_headlight_map[REAR_LEFT][3]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[FRONT_LEFT][3]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[REAR_LEFT][2]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[FRONT_LEFT][2]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[REAR_LEFT][1]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[FRONT_LEFT][1]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[REAR_LEFT][0]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[FRONT_LEFT][0]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[REAR_RIGHT][3]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[FRONT_RIGHT][3]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[REAR_RIGHT][2]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[FRONT_RIGHT][2]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[REAR_RIGHT][1]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[FRONT_RIGHT][1]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[REAR_RIGHT][0]] ? L"ðŸŒŸ": L"[]",
  gpio_map[gpio_headlight_map[FRONT_RIGHT][0]] ? L"ðŸŒŸ": L"[]");

    setlocale(LC_ALL, "");
    
    mvwaddwstr(menu_win, 0, 0, car);

    wrefresh(menu_win);
  }

  endwin();
}